[{"state":{"code":"%% Copyright (c) 2023, KHAN Reaz<khanreaz@ieee.org>\n%% All rights reserved.\n\n%% This source code is licensed under the BSD-style license found in the\n%% LICENSE file in the root directory : https://github.com/khanreaz/SmartCity-with-UWB-eID\n\n\nsequenceDiagram\n    participant user as USER\n    participant idC as eID-CARD\n    participant idApp as AusweisAPP2\n    participant idServ as eID-SERVER\n    participant service as SERVICE\n\n    user->>+service: USER opens provider’s web service requiring online authentication\n    service->>+idServ: SERVICE transmits the authentication request to eID-SERVER\n    Note over idC,idServ: Secure NFC channel is established between eID-SERVER, AusweisAPP2 and eID-CARD.\n    idServ->>+idApp: Authenticity of eID-SERVER and integrity of the eID-CARD is checked\n    alt If credential is invalid\n        idApp->>user: APP notifies USER that the eID verification server is invalid\n    else If credential is valid\n        idApp->>-user: AusweisAPP2 shows USER the SERVICE provider's authorization<br/> certificate and the requested USER data categories\n\n        Note over user,idApp: The user decides which personal data to transmit\n        \n        user->>+idApp: USER input 6 digits eID-CARD PIN\n\n        idC->>idApp: eID-CARD exchanges encrypted data over NFC\n        idApp->>idServ: AusweisAPP2 sends data to eID-SERVER\n        idServ->>service: eID-SERVER sends an authentication response and ID card data to\n\n        Note left of service: SERVICE checks the authentication results<br/> and decides whether the authentication was successful\n\n        service->>user: A response is  sent to the USER and/or the SERVICE is provided\n    end","mermaid":"{\n  \"theme\": \"default\"\n}","autoSync":true,"updateDiagram":false,"editorMode":"code","pan":{"x":106.2055251205154,"y":47.045465197966735},"zoom":0.8774045109748841,"panZoom":false},"time":1679586022315,"type":"manual","id":"d4d32aac-f7f2-4ec2-bf55-e62c27849137","name":"helpless-morning"},{"state":{"code":"sequenceDiagram\n    participant user as USER\n    participant idC as eID-CARD\n    participant idApp as AusweisAPP2\n    participant idServ as eID-SERVER\n    participant service as SERVICE\n\n    user->>+service: USER opens provider’s web service requiring online authentication\n    service->>+idServ: SERVICE transmits the authentication request to eID-SERVER\n    Note over idC,idServ: Secure NFC channel is established between eID-SERVER, AusweisAPP2 and eID-CARD.\n    idServ->>+idApp: Authenticity of eID-SERVER and integrity of the eID-CARD is checked\n    alt If credential is invalid\n        idApp->>user: APP notifies USER that the eID verification server is invalid\n    else If credential is valid\n        idApp->>-user: AusweisAPP2 shows USER the SERVICE provider's authorization<br/> certificate and the requested USER data categories\n\n        Note over user,idApp: The user decides which personal data to transmit\n        \n        user->>+idApp: USER input 6 digits eID-CARD PIN\n\n        idC->>idApp: eID-CARD exchanges encrypted data over NFC\n        idApp->>idServ: AusweisAPP2 sends data to eID-SERVER\n        idServ->>service: eID-SERVER sends an authentication response and ID card data to\n\n        Note left of service: SERVICE checks the authentication results<br/> and decides whether the authentication was successful\n\n        service->>user: A response is  sent to the USER and/or the SERVICE is provided\n    end","mermaid":"{\n  \"theme\": \"default\"\n}","autoSync":true,"updateDiagram":false,"editorMode":"code","pan":{"x":106.2055251205154,"y":47.045465197966735},"zoom":0.8774045109748841,"panZoom":false},"time":1679170876347,"type":"manual","id":"928910b3-f7b7-4d57-b794-24b9c6b4d973","name":"howling-thailand"},{"state":{"code":"sequenceDiagram\n    participant user as USER\n    participant idC as eID-CARD\n    participant idApp as AusweisAPP2\n    participant idServ as eID-SERVER\n    participant service as SERVICE\n\n    user->>+service: USER opens provider’s web service requiring online authentication\n    service->>+idServ: SERVICE transmits the authentication request to eID-SERVER\n    Note over idC,idServ: Secure NFC channel is established between eID-SERVER, AusweisAPP2 and eID-CARD.\n    idServ->>+idApp: Authenticity of eID-SERVER and integrity of the eID-CARD is checked\n    alt If credentials is invalid\n        idApp->>user: APP notifies USER that the eID verification server is invalid\n    else If credentials is valid\n        idApp->>-user: AusweisAPP2 shows USER the SERVICE provider's authorization<br/> certificate and the requested USER data categories\n\n        Note over user,idApp: The user decides which personal data he/she wishes to transmit\n        \n        user->>+idApp: USER input 6 digits eID-CARD PIN\n\n        idC->>idApp: eID-CARD exchanges encrypted data over NFC\n        idApp->>idServ: AusweisAPP2 sends data to eID-SERVER\n        idServ->>service: eID-SERVER sends an authentication response and ID card data to\n\n        Note left of service: SERVICE checks the authentication results<br/> and decides whether the authentication was successful\n    end","mermaid":"{\n  \"theme\": \"default\"\n}","autoSync":true,"updateDiagram":false,"editorMode":"code","pan":{"x":106.2055251205154,"y":47.045465197966735},"zoom":0.8774045109748841,"panZoom":false},"time":1679170629117,"type":"manual","id":"50075777-017e-4ffd-9dd0-f4ca1a39e376","name":"puny-doctor"},{"state":{"code":"sequenceDiagram\n    participant user as USER\n    participant idC as eID-CARD\n    participant idApp as AusweisAPP2\n    participant idServ as eID-SERVER\n    participant service as SERVICE\n\n    user->>+service: USER opens provider’s web service requiring online authentication\n    service->>+idServ: SERVICE transmits the authentication request to eID-SERVER\n    Note over idC,idServ: Secure NFC channel is established between eID-SERVER, AusweisAPP2 and eID-CARD.\n    idServ->>+idApp: Authenticity of eID-SERVER and integrity of the eID-CARD is checked\n    alt If Credentials is invalid\n        idApp->>user: APP notifies USER that the eID verification server is invalid\n    else If Credentials is valid\n        idApp->>-user: AusweisAPP2 shows USER the SERVICE provider's authorization<br/> certificate and the requested USER data categories\n\n        Note over user,idApp: The user decides which personal data he/she wishes to transmit\n        \n        user->>+idApp: USER input 6 digits eID-CARD PIN\n\n        idC->>idApp: eID-CARD exchanges encrypted data over NFC\n        idApp->>idServ: AusweisAPP2 sends data to eID-SERVER\n        idServ->>service: eID-SERVER sends an authentication response and ID card data to\n    end","mermaid":"{\n  \"theme\": \"default\"\n}","autoSync":true,"updateDiagram":false,"editorMode":"code","pan":{"x":106.2055251205154,"y":47.045465197966735},"zoom":0.8774045109748841,"panZoom":false},"time":1679170300358,"type":"manual","id":"f4fea75f-554f-4e0b-8250-bf060d66e171","name":"cagey-winter"},{"state":{"code":"sequenceDiagram\n    participant user as USER\n    participant idC as eID-CARD\n    participant idApp as AusweisAPP2\n    participant idServ as eID-SERVER\n    participant service as SERVICE\n\n    user->>+service: USER opens provider’s web service requiring online authentication\n    service->>+idServ: SERVICE transmits the authentication request to eID-SERVER\n    Note over idC,idServ: secure channel is established between the eID-SERVER, AusweisAPP2 and the ID card's chip.\n    idServ->>+idApp: Check\n    alt If Credentials is invalid\n        idApp->>user: APP notifies USER that the eID verification server is invalid\n    else If Credentials is valid\n        idApp->>-user: AusweisAPP2 shows USER the SERVICE provider's authorization<br/> certificate and the requested USER data categories\n\n        Note over user,idApp: The user decides which personal data he/she wishes to transmit\n    end","mermaid":"{\n  \"theme\": \"default\"\n}","autoSync":true,"updateDiagram":false,"editorMode":"code","pan":{"x":106.2055251205154,"y":47.045465197966735},"zoom":0.8774045109748841,"panZoom":false},"time":1679169207916,"type":"manual","id":"2d120c13-ebec-4a67-9b34-46882c0ca5ea","name":"hundreds-egypt"},{"state":{"code":"sequenceDiagram\n    participant user as USER\n    participant idC as eID-CARD\n    participant idApp as AusweisAPP2\n    participant idServ as eID-SERVER\n    participant service as SERVICE\n\n    user->>+service: USER opens provider’s web service requiring online authentication\n    service->>+idServ: SERVICE transmits the authentication request to eID-SERVER\n    Note over idC,idServ: secure channel is established between the eID-SERVER, AusweisAPP2 and the ID card's chip.\n    idServ->>+idApp: Check\n    alt If Credentials invalid\n        idApp->>user: APP notifies USER that the eID verification server is invalid\n    else If Valid Credentials\n        idApp->>-user: Valid eID-SERVER\n\n        Note over user,idApp: \n    end","mermaid":"{\n  \"theme\": \"default\"\n}","autoSync":true,"updateDiagram":false,"editorMode":"code","pan":{"x":106.2055251205154,"y":47.045465197966735},"zoom":0.8774045109748841,"panZoom":false},"time":1679168577212,"type":"manual","id":"92a20369-ecfd-41ad-baff-44b5bd64f37e","name":"clean-plumber"},{"state":{"code":"sequenceDiagram\n    participant user as USER\n    participant idC as eID-CARD\n    participant idApp as AusweisApp2\n    participant idServ as eID-SERVER\n    participant service as SERVICE\n\n    user->>+service: USER opens provider’s web service requiring online authentication\n    service->>+idServ: The SERVICE transmits the authentication request to the eID-SERVER\n    Note over idC,idServ: secure channel is established between the eID-SERVER, AusweisApp2 and the ID card's chip.\n    idServ->>+idApp: Check\n    alt Credentials invalid\n        idApp->>user: Invalid eID-SERVER\n    else Valid Credentials\n        idApp->>-user: Valid eID-SERVER\n\n        Note over user,idApp: \n    end","mermaid":"{\n  \"theme\": \"default\"\n}","autoSync":true,"updateDiagram":false,"editorMode":"code","pan":{"x":106.2055251205154,"y":47.045465197966735},"zoom":0.8774045109748841,"panZoom":false},"time":1679160688165,"type":"manual","id":"79a8bf92-2fb8-45e6-869e-a58da420f563","name":"puny-helicopter"},{"state":{"code":"sequenceDiagram\n    participant user as User\n    participant idC as eID-Card\n    participant idApp as AusweisApp2\n    participant mail as Mail Service\n    participant db as Storage\n\n    Note over web,db: The user must be logged in to submit blog posts\n    web->>+account: Logs in using credentials\n    account->>db: Query stored accounts\n    db->>account: Respond with query result\n\n    alt Credentials not found\n        account->>web: Invalid credentials\n    else Credentials found\n        account->>-web: Successfully logged in\n\n        Note over web,db: When the user is authenticated, they can now submit new posts\n        web->>+blog: Submit new post\n        blog->>db: Store post data\n\n        par Notifications\n            blog--)mail: Send mail to blog subscribers\n            blog--)db: Store in-site notifications\n        and Response\n            blog-->>-web: Successfully posted\n        end\n    end\n\n","mermaid":"{\n  \"theme\": \"default\"\n}","autoSync":true,"updateDiagram":false,"editorMode":"code","pan":{"x":106.2055251205154,"y":47.045465197966735},"zoom":0.8774045109748841,"panZoom":false},"time":1679157966758,"type":"manual","id":"651a5c2f-c04c-4da0-be9b-f9940d21b47a","name":"adorable-dog"}]